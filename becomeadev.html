<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Become a Developer — Application</title>

<meta name="robots" content="noindex, nofollow">
<meta name="theme-color" content="#000000">

<style>
:root{
  --bg:#050505;
  --panel:#0b0b0b;
  --border:rgba(255,255,255,.08);
  --text:#f5f5f5;
  --muted:#a3a3a3;
  --red:#ef4444;
  --red2:#b91c1c;
}

*{ box-sizing:border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }

body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(800px 400px at 20% 0%, rgba(239,68,68,.18), transparent 60%),
    radial-gradient(circle at top, #141414, var(--bg));
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}

.container{
  width:100%;
  max-width:780px;
  border:1px solid var(--border);
  border-radius:22px;
  background:rgba(0,0,0,.35);
  padding:22px;
}

h1,h2{ margin:0 0 10px; }
p{ color:var(--muted); line-height:1.6; font-size:14px; }

.hidden{ display:none; }

.warning{
  border:1px solid rgba(239,68,68,.35);
  background:rgba(239,68,68,.08);
  padding:14px;
  border-radius:14px;
  margin-bottom:16px;
}

.btn{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.1);
  font-weight:900;
  cursor:pointer;
}
.btn.red{
  background:linear-gradient(135deg,var(--red),var(--red2));
  color:white;
}
.btn.gray{
  background:rgba(255,255,255,.06);
  color:var(--text);
}

.row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
@media (max-width:700px){
  .row{ grid-template-columns:1fr; }
}

.field label{
  display:block;
  color:var(--muted);
  font-size:12px;
  margin-bottom:6px;
}
.field input{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.22);
  color: var(--text);
  outline:none;
}
.field input:focus{
  border-color: rgba(239,68,68,.35);
  box-shadow: 0 0 0 3px rgba(239,68,68,.14);
}

.question{
  margin-top:16px;
  padding:16px;
  border:1px solid var(--border);
  border-radius:16px;
  background:rgba(255,255,255,.03);
}

.answers label{
  display:block;
  margin-top:10px;
  cursor:pointer;
  font-size:14px;
}

.score{
  font-size:20px;
  font-weight:950;
  color:#fecaca;
}
.small{
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="container">

  <!-- LOCKED SCREEN -->
  <div id="lockedScreen" class="hidden">
    <h1 style="color:#ef4444;">Application Locked</h1>
    <p>You cannot retake this application on this device/browser.</p>
  </div>

  <!-- WARNING / START SCREEN -->
  <div id="warningScreen">
    <h1>⚠️ Developer Application</h1>

    <div class="warning">
      <p>
        This is a <b>one-time application</b>.
        <br><br>
        • If you <b>change tabs, minimize, or leave this page</b>, the application ends and you <b>cannot take it again</b>.
        <br>
        • Any <b>signs of AI assistance</b>, copying, or outside help may result in a <b>blacklist</b>.
        <br>
        • Score + answers + basic behavior signals are logged.
      </p>
    </div>

    <p>Enter your info to begin:</p>

    <div class="row">
      <div class="field">
        <label>Discord Username (example: name or name#0000)</label>
        <input id="discordUser" placeholder="yourname" maxlength="40" />
      </div>
      <div class="field">
        <label>Discord ID (numbers only)</label>
        <input id="discordId" placeholder="123456789012345678" inputmode="numeric" maxlength="25" />
      </div>
    </div>

    <p class="small" style="margin-top:10px;">
      This test has <b>15 HTML questions</b>. Answer honestly.
    </p>

    <button class="btn red" onclick="startTest()">Start</button>
  </div>

  <!-- TEST SCREEN -->
  <div id="testScreen" class="hidden">
    <h2 id="progress"></h2>
    <div id="questionBox"></div>
    <button class="btn gray" onclick="nextQuestion()">Next</button>
  </div>

  <!-- RESULT SCREEN -->
  <div id="resultScreen" class="hidden">
    <h1>Application Submitted</h1>
    <p class="score" id="scoreText"></p>
    <p>Your results were sent for review.</p>
  </div>

</div>

<script>
const WEBHOOK = "https://discord.com/api/webhooks/1464366500738760887/jP8FA6F1m9-uh-KUnbh92vHH4Fiv28MbalyTAdXFbip4xgr7K5ltvhH3EounmdoRhIW7";
const LOCK_KEY = "devAppLocked_v2";
const ATTEMPT_KEY = "devAppAttempt_v2";

const questions = [
  { q:"What does HTML stand for?", a:["Hyper Text Markup Language","High Text Machine Language","Hyper Tool Markup"], c:0 },
  { q:"Which tag creates a hyperlink?", a:["<a>","<link>","<href>"], c:0 },
  { q:"Which tag is used to display an image?", a:["<img>","<image>","<pic>"], c:0 },
  { q:"What does the <head> section usually contain?", a:["Metadata (title, meta, links)","Only visible content","Only images"], c:0 },
  { q:"Which attribute opens a link in a new tab/window?", a:["target=\"_blank\"","open=\"new\"","rel=\"newtab\""], c:0 },
  { q:"Which is the semantic tag for important/bold text?", a:["<strong>","<b>","<bold>"], c:0 },
  { q:"Which tag is used for an unordered list?", a:["<ul>","<ol>","<list>"], c:0 },
  { q:"Which tag inserts a line break?", a:["<br>","<lb>","<break>"], c:0 },
  { q:"Which tag is best for a site navigation section?", a:["<nav>","<menu>","<navigate>"], c:0 },
  { q:"What is the purpose of the alt attribute on <img>?", a:["Provides text description / accessibility","Changes image color","Makes image load faster"], c:0 },
  { q:"Which tag wraps the visible page content?", a:["<html>","<body>","<main>"], c:1 },
  { q:"Which input type hides typed characters?", a:["password","hidden","secure"], c:0 },
  { q:"Which tag is used to create a form?", a:["<form>","<input>","<fieldset>"], c:0 },
  { q:"What does <!DOCTYPE html> do?", a:["Declares HTML document type (standards mode)","Links CSS file","Loads JavaScript"], c:0 },
  { q:"Which tag is used for a table row?", a:["<tr>","<td>","<th>"], c:0 }
];

let index = 0;
let score = 0;
let answers = [];
let locked = false;

let userDiscordName = "";
let userDiscordId = "";
let startedAt = null;
let endedReason = "Completed";

function show(id){
  ["warningScreen","testScreen","resultScreen","lockedScreen"].forEach(x=>{
    document.getElementById(x).classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");
}

(function initLock(){
  if(localStorage.getItem(LOCK_KEY)){
    show("lockedScreen");
  }
})();

document.addEventListener("visibilitychange", () => {
  if(document.hidden && !locked && localStorage.getItem(ATTEMPT_KEY) === "started"){
    lockApplication("Tab switch / page leave detected");
  }
});

window.addEventListener("blur", () => {
  // blur can happen from switching apps or tabs
  if(!locked && localStorage.getItem(ATTEMPT_KEY) === "started"){
    lockApplication("Window lost focus (possible tab switch)");
  }
});

function startTest(){
  if(localStorage.getItem(LOCK_KEY)){
    show("lockedScreen");
    return;
  }

  const u = document.getElementById("discordUser").value.trim();
  const id = document.getElementById("discordId").value.trim();

  if(!u || u.length < 2) return alert("Enter your Discord username.");
  if(!id || id.length < 10 || !/^\d+$/.test(id)) return alert("Enter a valid Discord ID (numbers only).");

  userDiscordName = u;
  userDiscordId = id;

  startedAt = new Date();
  localStorage.setItem(ATTEMPT_KEY, "started");

  show("testScreen");
  renderQuestion();
}

function renderQuestion(){
  const q = questions[index];

  // Safety: prevent blank render
  if(!q || !q.q || !Array.isArray(q.a) || q.a.length < 2){
    lockApplication("Question data error");
    return;
  }

  document.getElementById("progress").textContent = `Question ${index+1} / ${questions.length}`;

  let html = `<div class="question"><p><b>${escapeHTML(q.q)}</b></p><div class="answers">`;
  q.a.forEach((ans,i)=>{
    html += `
      <label>
        <input type="radio" name="ans" value="${i}">
        ${escapeHTML(ans)}
      </label>`;
  });
  html += "</div></div>";

  document.getElementById("questionBox").innerHTML = html;
}

function nextQuestion(){
  const sel = document.querySelector('input[name="ans"]:checked');
  if(!sel) return alert("Select an answer.");

  const val = parseInt(sel.value,10);
  answers.push(val);

  if(val === questions[index].c) score++;

  index++;
  if(index >= questions.length){
    finish();
  } else {
    renderQuestion();
  }
}

function finish(){
  locked = true;
  endedReason = "Completed";
  localStorage.setItem(LOCK_KEY,"true");
  localStorage.setItem(ATTEMPT_KEY, "ended");

  show("resultScreen");
  document.getElementById("scoreText").textContent = `Score: ${score} / ${questions.length}`;

  sendWebhook(endedReason);
}

function lockApplication(reason){
  locked = true;
  endedReason = reason;

  localStorage.setItem(LOCK_KEY,"true");
  localStorage.setItem(ATTEMPT_KEY, "ended");

  sendWebhook(reason);
  alert("Application ended: " + reason);
  show("lockedScreen");
}

function sendWebhook(reason){
  const endedAt = new Date();
  const ms = startedAt ? (endedAt - startedAt) : null;

  const payload = {
    content: null,
    embeds: [{
      title: "New Developer Application",
      color: 15548997,
      fields: [
        { name:"Discord Username", value: userDiscordName || "N/A", inline: true },
        { name:"Discord ID", value: userDiscordId || "N/A", inline: true },
        { name:"Result", value: reason || "N/A" },
        { name:"Score", value: `${score} / ${questions.length}` , inline: true},
        { name:"Time (seconds)", value: ms !== null ? String(Math.max(0, Math.round(ms/1000))) : "N/A", inline: true },
        { name:"Answers (index list)", value: "```" + JSON.stringify(answers) + "```" }
      ]
    }]
  };

  fetch(WEBHOOK,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(payload)
  }).catch(()=>{});
}

function escapeHTML(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#39;");
}
</script>

</body>
</html>
